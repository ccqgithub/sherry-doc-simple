+function(){function f(a){var b,c,e,f;if(d){for(b=[],c=null,e=0,f=a.touches.length;f>e;e++)c=a.touches[e],b.push({x:c.pageX,y:c.pageY});return b}return[{x:a.pageX,y:a.pageY}]}function g(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)}function h(a){return a.touches?a.touches.length:1}function i(a,b){var c,d;return a.length>=2&&b.length>=2?(c=g(a[1],a[0]),d=g(b[1],b[0]),d/c):1}function j(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function k(a,b){var c=Math.atan(-1*(b.y-a.y)/(b.x-a.x))*(180/Math.PI);return 0>c?c+180:c}function l(a){var c,b={up:-45>a&&a>-135,down:a>=45&&135>a,left:a>=135||-135>=a,right:a>=-45&&45>=a};for(c in b)if(b[c])return c;return null}function n(a){for(var b=0,c=0;a.offsetParent;)b+=a.offsetLeft,c+=a.offsetTop,a=a.offsetParent;return{left:b,top:c}}function o(){w=x=y=null,F=D=z=A=!1,B=!1,t={},J=!1}function q(a){return"touchmove"===a.type||"mousemove"===a.type}function r(a){return"touchend"===a.type||"mouseup"===a.type||"touchcancel"===a.type}function s(a){return a}var a={},b=function(a,b,c){var d,e;c=c||{},c.type=b,e={bubbles:!0,cancelable:!0,detail:c},"undefined"!=typeof CustomEvent?(d=new CustomEvent(b,e),a&&a.dispatchEvent(d)):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!0,!0,c),a&&a.dispatchEvent(d))},c={tap:!0,doubleTap:!0,tapMaxDistance:10,hold:!0,holdTime:650,maxDoubleTapInterval:300,swipe:!0,swipeTime:300,swipeMinDistance:18,swipeFactor:5,drag:!0,pinch:!0,minScaleRate:0,minRotationAngle:0},d="ontouchstart"in window,e={TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",CLICK:"click",PINCH_START:"pinchstart",PINCH_END:"pinchend",PINCH:"pinch",PINCH_IN:"pinchin",PINCH_OUT:"pinchout",ROTATION_LEFT:"rotateleft",ROTATION_RIGHT:"rotateright",ROTATION:"rotate",SWIPE_START:"swipestart",SWIPING:"swiping",SWIPE_END:"swipeend",SWIPE_LEFT:"swipeleft",SWIPE_RIGHT:"swiperight",SWIPE_UP:"swipeup",SWIPE_DOWN:"swipedown",SWIPE:"swipe",DRAG:"drag",DRAGSTART:"dragstart",DRAGEND:"dragend",HOLD:"hold",TAP:"tap",DOUBLE_TAP:"doubletap"},t={start:null,move:null,end:null},u=0,w=null,x=null,y=null,z=!1,A=!1,B=!1,C={},D=!1,E=null,F=!1,H=null,I=1,J=!1,K=[],L=0,M=0,N=0,O=null,P={_getAngleDiff:function(a){for(var b=parseInt(L-k(a[0],a[1]),10),c=0;Math.abs(b-M)>90&&c++<50;)0>M?b-=180:b+=180;return M=parseInt(b,10)},pinch:function(a){var f,g,j,k,l,n,m,d=a.target;if(c.pinch){if(!D)return;if(h(a)<2&&!r(a))return;f=i(t.start,t.move),g=this._getAngleDiff(t.move),j={type:"",originEvent:a,scale:f,rotation:g,direction:g>0?"right":"left",fingersCount:h(a)},A?q(a)?(j.fingerStatus="move",b(d,e.PINCH,j)):r(a)&&(j.fingerStatus="end",b(d,e.PINCH_END,j),o()):(A=!0,j.fingerStatus="start",b(d,e.PINCH_START,j)),Math.abs(1-f)>c.minScaleRate&&(k=s(j),l=1e-11,f>I?(I=f-l,b(d,e.PINCH_OUT,k,!1)):I>f&&(I=f+l,b(d,e.PINCH_IN,k,!1)),r(a)&&(I=1)),Math.abs(g)>c.minRotationAngle&&(m=s(j),n=g>0?e.ROTATION_RIGHT:e.ROTATION_LEFT,b(d,n,m,!1),b(d,e.ROTATION,j))}},rotateSingleFinger:function(a){var d,f,g,i,j,c=a.target;if(J&&h(a)<2){if(!t.move)return;K.length<2&&(d=n(c),K=[{x:d.left+c.offsetWidth/2,y:d.top+c.offsetHeight/2},t.move[0]],L=parseInt(k(K[0],K[1]),10)),f=[K[0],t.move[0]],g=this._getAngleDiff(f),i={type:"",originEvent:a,rotation:g,direction:g>0?"right":"left",fingersCount:h(a)},q(a)?i.fingerStatus="move":(r(a)||"mouseout"===a.type)&&(i.fingerStatus="end",b(c,e.PINCH_END,i),o()),j=g>0?e.ROTATION_RIGHT:e.ROTATION_LEFT,b(c,j,i),b(c,e.ROTATION,i)}},swipe:function(a){var f,i,k,m,n,o,p,s,v,w,d=a.target;!D||!t.move||h(a)>1||(f=Date.now(),i=f-u,k=g(t.start[0],t.move[0]),m={x:t.move[0].x-C.left,y:t.move[0].y-C.top},n=j(t.start[0],t.move[0]),o=l(n),p=i/1e3,s=10*(10-c.swipeFactor)*p*p,v={type:e.SWIPE,originEvent:a,position:m,direction:o,distance:k,distanceX:t.move[0].x-t.start[0].x,distanceY:t.move[0].y-t.start[0].y,x:t.move[0].x-t.start[0].x,y:t.move[0].y-t.start[0].y,angle:n,duration:i,fingersCount:h(a),factor:s},c.swipe&&(w=function(){var a=e;switch(o){case"up":b(d,a.SWIPE_UP,v);break;case"down":b(d,a.SWIPE_DOWN,v);break;case"left":b(d,a.SWIPE_LEFT,v);break;case"right":b(d,a.SWIPE_RIGHT,v)}},z?q(a)?(v.fingerStatus=v.swipe="move",b(d,e.SWIPING,v),i>c.swipeTime&&i<c.swipeTime+50&&k>c.swipeMinDistance&&(w(),b(d,e.SWIPE,v,!1))):(r(a)||"mouseout"===a.type)&&(v.fingerStatus=v.swipe="end",b(d,e.SWIPE_END,v),c.swipeTime>i&&k>c.swipeMinDistance&&(w(),b(d,e.SWIPE,v,!1))):(v.fingerStatus=v.swipe="start",z=!0,b(d,e.SWIPE_START,v))),c.drag&&(B?q(a)?(v.fingerStatus=v.swipe="move",b(d,e.DRAG,v)):r(a)&&(v.fingerStatus=v.swipe="end",b(d,e.DRAGEND,v)):(v.fingerStatus=v.swipe="start",B=!0,b(d,e.DRAGSTART,v))))},tap:function(a){var f,i,j,k,d=a.target;if(c.tap){if(f=Date.now(),i=f-u,j=g(t.start[0],t.move?t.move[0]:t.start[0]),clearTimeout(E),k=function(){if(O&&c.doubleTap&&u-N<c.maxDoubleTapInterval){var a=g(O,t.start[0]);if(16>a)return!0}return!1}())return clearTimeout(H),b(d,e.DOUBLE_TAP,{type:e.DOUBLE_TAP,originEvent:a,position:t.start[0]}),void 0;if(c.tapMaxDistance<j)return;c.holdTime>i&&h(a)<=1&&(F=!0,N=f,O=t.start[0],H=setTimeout(function(){b(d,e.TAP,{type:e.TAP,originEvent:a,fingersCount:h(a),position:O})},220))}},hold:function(a){var d=a.target;c.hold&&(clearTimeout(E),E=setTimeout(function(){if(t.start){var e=g(t.start[0],t.move?t.move[0]:t.start[0]);c.tapMaxDistance<e||F||b(d,"hold",{type:"hold",originEvent:a,fingersCount:h(a),position:t.start[0]})}},c.holdTime))}},Q=function(a){var c,d,b=a.target;switch(a.type){case"touchstart":case"mousedown":K=[],D=!0,(!t.start||t.start.length<2)&&(t.start=f(a)),h(a)>=2&&(L=parseInt(k(t.start[0],t.start[1]),10)),u=Date.now(),w=a,C={},c=b.getBoundingClientRect(),d=document.documentElement,C={top:c.top+(window.pageYOffset||d.scrollTop)-(d.clientTop||0),left:c.left+(window.pageXOffset||d.scrollLeft)-(d.clientLeft||0)},P.hold(a);break;case"touchmove":case"mousemove":if(!D||!t.start)return;t.move=f(a),h(a)>=2?P.pinch(a):J?P.rotateSingleFinger(a):P.swipe(a);break;case"touchend":case"touchcancel":case"mouseup":case"mouseout":if(!D)return;y=a,A?P.pinch(a):J?P.rotateSingleFinger(a):z?P.swipe(a):P.tap(a),o(),L=0,M=0,a.touches&&1===a.touches.length&&(D=!0,J=!0)}};a.init=function(a,b){var h,e=d?"touchstart touchmove touchend touchcancel":"mouseup mousedown mousemove mouseout",b=b||{},f=e.split(" "),g=f.length;for(h in c)b[h]&&(c[h]=b[h]);for(h=0;g>h;h++)a.addEventListener?a.addEventListener(f[h],Q,!1):a.attachEvent(f[h],Q);jQuery.event.props.push("detail")},a.init(document)}();